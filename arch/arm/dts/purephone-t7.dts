// Copyright (c) 2017-2022, Mudita Sp. z.o.o. All rights reserved.
// For licensing, see https://github.com/mudita/MuditaOS/LICENSE.md

/dts-v1/;
#include "purephone-t7.dtsi"
#include "purephone-t7-u-boot.dtsi"
#include "imxrt1050-pinfunc.h"

/ {
	model = "PurePhone T7";
	compatible = "fsl,purephone-t7", "fsl,imxrt1050";

	chosen {
		bootargs = "root=/dev/ram";
		stdout-path = "serial0:115200n8";
		tick-timer = &gpt1;
	};

	memory {
		device_type = "memory";
		reg = <0x80000000 0x4000000>;
	};
};


&lpuart3 { /* console */
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_lpuart3>;
	status = "okay";
};

&semc {
	fsl,sdram-mux = /bits/ 8 <MUX_A8_SDRAM_A8
				MUX_CSX0_SDRAM_CS1
				0
				0
				0
				0>;
	fsl,sdram-control = /bits/ 8 <MEM_WIDTH_16BITS
					BL_8
					COL_10BITS
					CL_3>;
	fsl,sdram-timing = /bits/ 8 <0x02 // PRE2ACT
				     0x02 //ACT2RW
				     0x0D //RFRC
				     0x02 //WRC
				     0x07 //CKEOFF
				     0x07 //ACT2PRE

				     0x0D //SRRC
				     0x0B //REF2REF
				     0x0A //ACT2ACT
				     0x0 //ITO

				     0x00 //REBL
				     0x08 //PRESCALE
                     0x09 //RT
                     0x09>; //UT

	bank1: bank@0 {
		fsl,base-address = <0x80000000>;
		fsl,memory-size = <MEM_SIZE_64M>;
	};
};

&iomuxc {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_lpuart3>;

	purephone-t7 {
		pinctrl_lpuart3: lpuart3grp {
			fsl,pins = <
				MXRT1050_IOMUXC_GPIO_AD_B1_06_LPUART3_TXD
					0xf1
				MXRT1050_IOMUXC_GPIO_AD_B1_07_LPUART3_RXD
					0xf1
			>;
		};

		pinctrl_semc: semcgrp {
			fsl,pins = <
				MXRT1050_IOMUXC_GPIO_EMC_00_SEMC_DA00
                    0x0110F9	/* SEMC_D0 */
				MXRT1050_IOMUXC_GPIO_EMC_01_SEMC_DA01
                    0x0110F9	/* SEMC_D1 */
				MXRT1050_IOMUXC_GPIO_EMC_02_SEMC_DA02
                    0x0110F9	/* SEMC_D2 */
				MXRT1050_IOMUXC_GPIO_EMC_03_SEMC_DA03
                    0x0110F9	/* SEMC_D3 */
				MXRT1050_IOMUXC_GPIO_EMC_04_SEMC_DA04
                    0x0110F9	/* SEMC_D4 */
				MXRT1050_IOMUXC_GPIO_EMC_05_SEMC_DA05
                    0x0110F9	/* SEMC_D5 */
				MXRT1050_IOMUXC_GPIO_EMC_06_SEMC_DA06
                    0x0110F9	/* SEMC_D6 */
				MXRT1050_IOMUXC_GPIO_EMC_07_SEMC_DA07
                    0x0110F9	/* SEMC_D7 */
				MXRT1050_IOMUXC_GPIO_EMC_08_SEMC_DM00
                    0x0110F9	/* SEMC_DM0 */
				MXRT1050_IOMUXC_GPIO_EMC_09_SEMC_ADDR00
                    0x0110F9	/* SEMC_A0 */
				MXRT1050_IOMUXC_GPIO_EMC_10_SEMC_ADDR01
                    0x0110F9	/* SEMC_A1 */
				MXRT1050_IOMUXC_GPIO_EMC_11_SEMC_ADDR02
                    0x0110F9	/* SEMC_A2 */
				MXRT1050_IOMUXC_GPIO_EMC_12_SEMC_ADDR03
                    0x0110F9	/* SEMC_A3 */
				MXRT1050_IOMUXC_GPIO_EMC_13_SEMC_ADDR04
                    0x0110F9	/* SEMC_A4 */
				MXRT1050_IOMUXC_GPIO_EMC_14_SEMC_ADDR05
                    0x0110F9	/* SEMC_A5 */
				MXRT1050_IOMUXC_GPIO_EMC_15_SEMC_ADDR06
                    0x0110F9	/* SEMC_A6 */
				MXRT1050_IOMUXC_GPIO_EMC_16_SEMC_ADDR07
                    0x0110F9	/* SEMC_A7 */
				MXRT1050_IOMUXC_GPIO_EMC_17_SEMC_ADDR08
                    0x0110F9	/* SEMC_A8 */
				MXRT1050_IOMUXC_GPIO_EMC_18_SEMC_ADDR09
                    0x0110F9	/* SEMC_A9 */
				MXRT1050_IOMUXC_GPIO_EMC_19_SEMC_ADDR11
                    0x0110F9	/* SEMC_A11 */
				MXRT1050_IOMUXC_GPIO_EMC_20_SEMC_ADDR12
                    0x0110F9	/* SEMC_A12 */
				MXRT1050_IOMUXC_GPIO_EMC_21_SEMC_BA0
                    0x0110F9	/* SEMC_BA0 */
				MXRT1050_IOMUXC_GPIO_EMC_22_SEMC_BA1
                    0x0110F9	/* SEMC_BA1 */
				MXRT1050_IOMUXC_GPIO_EMC_23_SEMC_ADDR10
                    0x0110F9	/* SEMC_A10 */
				MXRT1050_IOMUXC_GPIO_EMC_24_SEMC_CAS
                    0x0110F9	/* SEMC_CAS */
				MXRT1050_IOMUXC_GPIO_EMC_25_SEMC_RAS
                    0x0110F9	/* SEMC_RAS */
				MXRT1050_IOMUXC_GPIO_EMC_26_SEMC_CLK
                    0x0110F9	/* SEMC_CLK */
				MXRT1050_IOMUXC_GPIO_EMC_27_SEMC_CKE
                    0x0110F9	/* SEMC_CKE */
				MXRT1050_IOMUXC_GPIO_EMC_28_SEMC_WE
                    0x0110F9	/* SEMC_WE */
				MXRT1050_IOMUXC_GPIO_EMC_29_SEMC_CS0
                    0x0110F9	/* SEMC_CS0 */
				MXRT1050_IOMUXC_GPIO_EMC_30_SEMC_DA08
                    0x0110F9	/* SEMC_D8 */
				MXRT1050_IOMUXC_GPIO_EMC_31_SEMC_DA09
                    0x0110F9	/* SEMC_D9 */
				MXRT1050_IOMUXC_GPIO_EMC_32_SEMC_DA10
                    0x0110F9	/* SEMC_D10 */
				MXRT1050_IOMUXC_GPIO_EMC_33_SEMC_DA11
                    0x0110F9	/* SEMC_D11 */
				MXRT1050_IOMUXC_GPIO_EMC_34_SEMC_DA12
                    0x0110F9	/* SEMC_D12 */
				MXRT1050_IOMUXC_GPIO_EMC_35_SEMC_DA13
                    0x0110F9	/* SEMC_D13 */
				MXRT1050_IOMUXC_GPIO_EMC_36_SEMC_DA14
                    0x0110F9	/* SEMC_D14 */
				MXRT1050_IOMUXC_GPIO_EMC_37_SEMC_DA15
                    0x0110F9	/* SEMC_D15 */
				MXRT1050_IOMUXC_GPIO_EMC_38_SEMC_DM01
                    0x0110F9	/* SEMC_DM1 */
				MXRT1050_IOMUXC_GPIO_EMC_39_SEMC_DQS
                    (0x0110F9 | IMX_PAD_SION)
                MXRT1050_IOMUXC_GPIO_EMC_40_SEMC_RDY
                    0x0110F9
                MXRT1050_IOMUXC_GPIO_EMC_41_SEMC_CSX0
                    0x0110F9	/* SEMC_CSX0 */
			>;
		};

        pinctrl_usdhc2: usdhc2grp {
        fsl,pins = <
            MXRT1050_IOMUXC_GPIO_SD_B1_05_USDHC2_CMD 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_04_USDHC2_CLK 0x0100B9
            MXRT1050_IOMUXC_GPIO_SD_B1_11_USDHC2_DATA7 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_10_USDHC2_DATA6 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_09_USDHC2_DATA5 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_08_USDHC2_DATA4 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_00_USDHC2_DATA3 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_01_USDHC2_DATA2 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_02_USDHC2_DATA1 0x017089
            MXRT1050_IOMUXC_GPIO_SD_B1_03_USDHC2_DATA0 0x017089
        >;
        };

        pinctrl_usdhc2_100mhz: usdhc2grp100mhz {
        fsl,pins = <
            MXRT1050_IOMUXC_GPIO_SD_B1_05_USDHC2_CMD 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_04_USDHC2_CLK 0x0100B9
            MXRT1050_IOMUXC_GPIO_SD_B1_11_USDHC2_DATA7 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_10_USDHC2_DATA6 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_09_USDHC2_DATA5 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_08_USDHC2_DATA4 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_00_USDHC2_DATA3 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_01_USDHC2_DATA2 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_02_USDHC2_DATA1 0x0170B9
            MXRT1050_IOMUXC_GPIO_SD_B1_03_USDHC2_DATA0 0x0170B9
        >;
        };

        pinctrl_usdhc2_200mhz: usdhc2grp200mhz {
        fsl,pins = <
            MXRT1050_IOMUXC_GPIO_SD_B1_05_USDHC2_CMD 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_04_USDHC2_CLK 0x0100C9
            MXRT1050_IOMUXC_GPIO_SD_B1_11_USDHC2_DATA7 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_10_USDHC2_DATA6 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_09_USDHC2_DATA5 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_08_USDHC2_DATA4 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_00_USDHC2_DATA3 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_01_USDHC2_DATA2 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_02_USDHC2_DATA1 0x0170C9
            MXRT1050_IOMUXC_GPIO_SD_B1_03_USDHC2_DATA0 0x0170C9
        >;
        };
	};
};

&gpt1 {
	status = "okay";
};

&usdhc2 {
    pinctrl-names = "default";
    pinctrl-0 = <&pinctrl_usdhc2>;
    pinctrl-1 = <&pinctrl_usdhc2_100mhz>;
    pinctrl-2 = <&pinctrl_usdhc2_200mhz>;
    status = "okay";
};

&usbotg1 {
	dr_mode = "host";
	status = "okay";
};
